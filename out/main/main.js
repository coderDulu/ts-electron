"use strict";const c=require("electron"),l=require("path"),b=require("fs");async function y(e="openDirectory"){const{canceled:s,filePaths:o}=await c.dialog.showOpenDialog({properties:[e]});if(!s)return o[0]}const f={"open-dev":e=>{e.sender.isDevToolsOpened()?e.sender.closeDevTools():e.sender.openDevTools()}},v={"dialog:openFile":async()=>y()};function j(){Object.keys(f).forEach(e=>{c.ipcMain.on(e,f[e])}),Object.keys(v).forEach(e=>{c.ipcMain.handle(e,v[e])})}function w(e){if(e.__esModule)return e;var s=e.default;if(typeof s=="function"){var o=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var n=Function.bind.apply(s,i);return new n}return s.apply(this,arguments)};o.prototype=s.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(o,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),o}var d={},_={get exports(){return d},set exports(e){d=e}};const $={},D=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"})),O=w(D),x="dotenv",E="16.0.3",P="Loads environment variables from .env file",B="lib/main.js",k="lib/main.d.ts",q={".":{require:"./lib/main.js",types:"./lib/main.d.ts",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},F={"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},M={type:"git",url:"git://github.com/motdotla/dotenv.git"},S=["dotenv","env",".env","environment","variables","config","settings"],T="README.md",A="BSD-2-Clause",R={"@types/node":"^17.0.9",decache:"^4.6.1",dtslint:"^3.7.0",sinon:"^12.0.1",standard:"^16.0.4","standard-markdown":"^7.1.0","standard-version":"^9.3.2",tap:"^15.1.6",tar:"^6.1.11",typescript:"^4.5.4"},I={node:">=12"},L={name:x,version:E,description:P,main:B,types:k,exports:q,scripts:F,repository:M,keywords:S,readmeFilename:T,license:A,devDependencies:R,engines:I},N=b,h=l,U=O,C=L,H=C.version,z=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function G(e){const s={};let o=e.toString();o=o.replace(/\r\n?/mg,`
`);let r;for(;(r=z.exec(o))!=null;){const i=r[1];let n=r[2]||"";n=n.trim();const a=n[0];n=n.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),a==='"'&&(n=n.replace(/\\n/g,`
`),n=n.replace(/\\r/g,"\r")),s[i]=n}return s}function u(e){console.log(`[dotenv@${H}][DEBUG] ${e}`)}function J(e){return e[0]==="~"?h.join(U.homedir(),e.slice(1)):e}function Q(e){let s=h.resolve(process.cwd(),".env"),o="utf8";const r=!!(e&&e.debug),i=!!(e&&e.override);e&&(e.path!=null&&(s=J(e.path)),e.encoding!=null&&(o=e.encoding));try{const n=p.parse(N.readFileSync(s,{encoding:o}));return Object.keys(n).forEach(function(a){Object.prototype.hasOwnProperty.call(process.env,a)?(i===!0&&(process.env[a]=n[a]),r&&u(i===!0?`"${a}" is already defined in \`process.env\` and WAS overwritten`:`"${a}" is already defined in \`process.env\` and was NOT overwritten`)):process.env[a]=n[a]}),{parsed:n}}catch(n){return r&&u(`Failed to load ${s} ${n.message}`),{error:n}}}const p={config:Q,parse:G};var V=d.config=p.config;d.parse=p.parse;_.exports=p;const g=V({path:`${process.cwd()}/.env.development`}).parsed;let t=null;const K=!c.app.isPackaged;async function m(){t=new c.BrowserWindow({width:900,height:670,webPreferences:{preload:l.join(__dirname,"../preload/preload.js"),nodeIntegration:!1,contextIsolation:!0},show:!1}),K?(t.loadURL(g?g.VITE_APP_URL:"http://localhost:5173"),t==null||t.webContents.openDevTools()):(console.log(l.join(__dirname,"../renderer/index.html")),t.loadFile(l.join(__dirname,"../renderer/index.html"))),t.on("ready-to-show",()=>{t==null||t.show()}),t.on("closed",function(){t==null||t.destroy(),t=null})}c.app.whenReady().then(()=>{m(),j(),c.app.on("activate",function(){c.BrowserWindow.getAllWindows().length===0&&m()})});c.app.on("window-all-closed",function(){process.platform!=="darwin"&&c.app.quit()});
